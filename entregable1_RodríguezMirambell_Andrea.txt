pipeline {
    agent any
    
    stages{
        
        stage('Verificar logs'){
            steps{
                echo"Validando existencia de logs"
                sh 'ls home/user/Logs | grep secure.log'
                echo "Logs encontrados"
            }
        }
        stage('Verificar script'){
            steps{
                echo "Validando existencia de script"
                sh 'ls /home/user/Scripts | grep test_main.py'
                echo "Script encontrado"
            }
        }
        
        stage('Analizar logs'){
            steps{
                echo "Procediendo a ejecutar el script"
                sh 'python -m purest -s /home/User/script/test_main.py'
                echo "Terminó la ejecución"
            }
        }
        
    }
}
